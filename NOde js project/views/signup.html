<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up</title>
    <link rel="stylesheet" href="signup.css">

    
</head>

<body>
    <!--Creating a form to Take input details, which on submitting will call userDetails -->
    <div class="signup">
        <form onsubmit="saveuser(event)">
            <label class="uname"> User Name</label><br>
            <input type="text" id="uname" name="username" placeholder="User Name" required><br><br>
            <label class="pn"> Phone Number</label><br>
            <input type="text" id="pnumber" name="phonenumber" placeholder="Phone Number" required><br><br>
            <label class="eid"> Email Id</label><br>
            <input type="email" id="eid" name="emailid" placeholder="Email Id" required><br><br>
            <label class="eid"> Password</label><br>
            <input type="password" id="pswrd" name="emailid" placeholder="Strong Password" required><br><br><br>
            <button class="form"  type="submit">Sign Up</button>
        </form><br>
        <form action="signin.html">
            <button>Existing User - Sign in </button>
        </form>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.3/axios.min.js"></script>
    <script>

         function saveuser(event) {
            event.preventDefault();
            //using try and catch block to catch the errors
            try {
                const userdata = document.getElementById("uname").value;
                const pnumberdata = document.getElementById("pnumber").value;
                const emaildata = document.getElementById("eid").value;
                const passwordData = document.getElementById("pswrd").value;
                //Storing them into a object format
                const obj = {
                    userdata,
                    pnumberdata,
                    emaildata,
                    passwordData
                }
                console.log(obj);
               
                // sending a post request and passing object to the server
                axios.post("http://127.0.0.1:4000/save-users", obj)
                    .then(console.log("User Details Saved Successfully"))
                    .catch(err => console.log(err));

                document.getElementById("uname").value = "";
                document.getElementById("pnumber").value = "";
                document.getElementById("eid").value = "";
                document.getElementById("pswrd").value = "";
            }
            catch (e) {
                console.log(e)
            }
            // Getting the value in string format from the user


        };




    </script>
</body>

</html>